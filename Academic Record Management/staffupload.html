<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Upload Grades</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/upload_grades.css" />
    <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>
    <script src="/javascript/contract.js"></script>
  </head>
  <body>
    <div class="staff-dashboard">
      <div class="sidebar">
        <div class="academic-record-management">Academic Record Management</div>
        <div class="list">
          <div class="menu-item" id="home-menu">
            <div class="home"></div>
            <div class="menu-text">Home</div>
          </div>
          <div class="menu-item" id="courses-menu">
            <div class="open-book"></div>
            <div class="menu-text">Courses</div>
          </div>
          <div class="menu-item" id="results-menu">
            <div class="ratings"></div>
            <div class="menu-text">Upload Results</div>
          </div>
        </div>
        <div class="menu-items" id="logout-menu">
          <div class="logout-rounded"></div>
          <div class="menu-text">Logout</div>
        </div>
      </div>
      <div class="main-container">
        <div class="header">
          <div class="dashboard">Dashboard</div>
          <div class="user-info">
            <div class="male-user"></div>
            <div class="user-details">Alabi Oshomoshiofu<br />0xc8...bxf8</div>
          </div>
        </div>
        <div class="content">
          <div class="upload-section">
            <div class="upload-title">Upload Final Results</div>
            <div class="tabs">
              <button class="tab-button active" onclick="openTab(event, 'individual')">Individual Upload</button>
              <button class="tab-button" onclick="openTab(event, 'excel')">Excel Upload</button>
            </div>
            <div id="individual" class="tab-content active">
              <div class="upload-form">
                <div class="input-field">
                  <label for="course-code" class="input-label">Course Code</label>
                  <input type="text" id="course-code" class="input-box" />
                </div>
                <div class="input-field">
                  <label for="course-title" class="input-label">Course Title</label>
                  <input type="text" id="course-title" class="input-box" />
                </div>
                <div class="input-field">
                  <label for="matriculation-number" class="input-label">Matriculation Number</label>
                  <input type="text" id="matriculation-number" class="input-box" />
                </div>
                <div class="input-field">
                  <label for="test1-score" class="input-label">Test 1 Score</label>
                  <input type="number" id="test1-score" class="input-box" oninput="calculateTotalAndGrade()" />
                </div>
                <div class="input-field">
                  <label for="test2-score" class="input-label">Test 2 Score</label>
                  <input type="number" id="test2-score" class="input-box" oninput="calculateTotalAndGrade()" />
                </div>
                <div class="input-field">
                  <label for="exam-score" class="input-label">Exam Score</label>
                  <input type="number" id="exam-score" class="input-box" oninput="calculateTotalAndGrade()" />
                </div>
                <div class="input-field">
                  <label for="total" class="input-label">Total</label>
                  <input type="text" id="total" class="input-box" readonly />
                </div>
                <div class="input-field grade-field">
                  <label for="grade" class="input-label">Grade</label>
                  <input type="text" id="grade" class="input-box small" readonly />
                </div>
                <button class="primary-button" onclick="submitIndividual()">Submit</button>
              </div>
            </div>
            <div id="excel" class="tab-content">
              <div class="upload-form">
                <div class="input-field">
                  <label for="excel-upload" class="input-label">Upload Excel File</label>
                  <input type="file" id="excel-upload" class="input-box" accept=".xlsx, .xls" />
                  <button class="primary-button" onclick="submitExcel()">Submit</button>
                </div>
              </div>
            </div>
            <div class="uploaded-scores">
              <table>
                <thead>
                  <tr>
                    <th>Course Code</th>
                    <th>Course Title</th>
                    <th>Matric Number</th>
                    <th>Test 1 Score</th>
                    <th>Test 2 Score</th>
                    <th>Exam Score</th>
                    <th>Total</th>
                    <th>Grade</th>
                  </tr>
                </thead>
                <tbody id="scores-table-body">
                  <!-- Student scores will be dynamically inserted here -->
                </tbody>
              </table>
              <button class="primary-button" onclick="uploadToBlockchain()">Upload</button>
            </div>          
          </div>
        </div>
      </div>
    </div>
    <script src="javascript/upload_grades.js"></script>
  </body>
</html>